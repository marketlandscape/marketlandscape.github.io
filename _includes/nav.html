<div class="market-mini">
  <div class="market-mini-row">
    <span class="market-mini-label">BTC</span>&thinsp;
    <span id="btcPrice" class="market-mini-value">--</span>
  </div>

  <div class="market-mini-row">
    <span class="market-mini-label">ETH</span>&thinsp;
    <span id="ethPrice" class="market-mini-value">--</span>
  </div>

  <div id="marketUpdated" class="market-mini-time">
    Updated -- UTC
  </div>
</div>

<script>
(async function () {
  try {
    const res = await fetch('/data/prices.json', { cache: 'no-store' });
    if (!res.ok) throw new Error('HTTP ' + res.status);
    const j = await res.json();

    const fmt = new Intl.NumberFormat('en-US', {
      maximumFractionDigits: 0
    });

    const btcEl = document.getElementById('btcPrice');
    const ethEl = document.getElementById('ethPrice');
    const updEl = document.getElementById('marketUpdated');

    if (btcEl && typeof j.btc === 'number') {
      btcEl.textContent = '$' + fmt.format(j.btc);
    }

    if (ethEl && typeof j.eth === 'number') {
      ethEl.textContent = '$' + fmt.format(j.eth);
    }

    if (updEl) {
      const t = j.updated_utc ? j.updated_utc : '-- UTC';
      const src = j.source ? (' Â· ' + j.source) : '';
      updEl.textContent = 'Updated ' + t + src;
    }
  } catch (e) {
    /* silently keep placeholders */
  }
})();
</script>

<nav class="site-nav">
  <ul class="nav-list">
    {% for item in site.data.nav %}
      <li>
        <a href="{{ item.url | relative_url }}">
          {{ item.title }}
        </a>
      </li>
    {% endfor %}
  </ul>
</nav>

